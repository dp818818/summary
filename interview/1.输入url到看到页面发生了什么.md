# 从输入url到看到页面都发生了什么？
1.DNS解析
2.TCP连接（三次握手）
3.客户端发送http请求
4.服务端响应客户端请求并返回报文
5.浏览器渲染页面
6.TCP断开链接（四次挥手）


## 1.DNS解析
根据输入的url查找对应的ip
### DNS负载均衡
比如每次访问淘宝时，不可能每次的ip都一样，淘宝需要很多个服务器，DNS需要返回合适的服务器给用户


## 3.客户端发送http请求
https://juejin.cn/post/7127194919235485733#heading-10
### 强缓存
服务器响应header:Expires与Cache-Control
Expires:通过设置的时间与本地时间比对，来设置强缓存时间
Cache-Control：通过设置max-age,来设置强缓存时间
### 协商缓存
last-modified与ETag 
last-modified是通过比对文件修改时间，ETag是比对文件指纹（内容哈希值）
#### last-modified
三步设置:
1.服务端获取文件修改时间
2.服务端将修改时间赋予响应头：last-modified
3.Cache-Control:no-cache（意思是跳过强缓存校验，直接进行协商缓存）
客户端获取服务端last-modified（文件修改）的时间，并将其设置为请求头If-Modified-Since,服务端比对文件修改时间与If-Modified-Since，文件修改时间更新了，重新获取文件返给客户端返回状态码200，未更新返回状态码304不返回文件。
#### ETag
服务端：读取文件指纹，放在响应头ETag
客户端：获取响应头ETag文件指纹，放在请求头if-None-Match
服务端：获取请求头if-None-Match的文件指纹，与目标文件的文件指纹比对，不一样，文件发生了改变，返回文件给客户端并更新响应头ETag返回状态码200,一样，返回状态码304



## 4.服务端响应客户端并返回报文
200 成功
201 无内容
301 永久重定向
302 临时重定向
304 未修改（协商缓存）
400 请求错误
401 没有权限
403 服务器拒绝访问
404 地址错误
500 服务器错误


## 5.webkit解析渲染页面过程
1.解析HTML生成DOM树
2.解析CSS生成CSSOM树
3.结合DOM树与CSSOM树生成渲染树
4.浏览器渲染并绘制页面
### 回流与重绘
回流是指页面布局发生改变，比如元素的大小、位置、数量等发生改变就会回流
重绘是指元素的颜色等内容改变，不涉及位置、大小变化，比如修改背景色、字体颜色等
回流非常消耗性能，动画等应让其脱离文档流，不使用table布局，避免回流


## 2.TCP三次握手
1.客户端向服务端发送链接请求（syn包 seq=x）
2.服务端确认客户端的链接请求（syn+ACK seq=y）
3.客户端向服务端发送确认链接（ACK seq=z）

## 6.TCP四次挥手
假如请求方是客户端
1.客户端发送终止链接请求，告诉服务器不会再传输数据
2.服务端告知客户端等待数据传输完毕
3.服务端发送数据传输完毕状态，告知客户端数据传输完毕
4.客户端收到FIN状态后，发送关闭确认





